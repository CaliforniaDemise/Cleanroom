--- before/net/minecraft/client/renderer/RenderGlobal.java
+++ after/net/minecraft/client/renderer/RenderGlobal.java
@@ -13,6 +13,7 @@
 import java.util.Queue;
 import java.util.Random;
 import java.util.Set;
+import java.util.function.Supplier;
 import javax.annotation.Nullable;
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockChest;
@@ -103,9 +104,9 @@
     private final TextureManager field_72770_i;
     private final RenderManager field_175010_j;
     private WorldClient field_72769_h;
-    private Set<RenderChunk> field_175009_l = Sets.newLinkedHashSet();
-    private List<RenderGlobal.ContainerLocalRenderInformation> field_72755_R = Lists.newArrayListWithCapacity(69696);
-    private final Set<TileEntity> field_181024_n = Sets.newHashSet();
+    private Set<RenderChunk> field_175009_l = Sets.<RenderChunk>newLinkedHashSet();
+    private List<RenderGlobal.ContainerLocalRenderInformation> field_72755_R = Lists.<RenderGlobal.ContainerLocalRenderInformation>newArrayListWithCapacity(69696);
+    private final Set<TileEntity> field_181024_n = Sets.<TileEntity>newHashSet();
     private ViewFrustum field_175008_n;
     private int field_72772_v = -1;
     private int field_72771_w = -1;
@@ -115,8 +116,8 @@
     private VertexBuffer field_175012_t;
     private VertexBuffer field_175011_u;
     private int field_72773_u;
-    private final Map<Integer, DestroyBlockProgress> field_72738_E = Maps.newHashMap();
-    private final Map<BlockPos, ISound> field_147593_P = Maps.newHashMap();
+    private final Map<Integer, DestroyBlockProgress> field_72738_E = Maps.<Integer, DestroyBlockProgress>newHashMap();
+    private final Map<BlockPos, ISound> field_147593_P = Maps.<BlockPos, ISound>newHashMap();
     private final TextureAtlasSprite[] field_94141_F = new TextureAtlasSprite[10];
     private Framebuffer field_175015_z;
     private ShaderGroup field_174991_A;
@@ -149,7 +150,7 @@
     private double field_147602_h;
     private boolean field_147595_R = true;
     private boolean field_184386_ad;
-    private final Set<BlockPos> field_184387_ae = Sets.newHashSet();
+    private final Set<BlockPos> field_184387_ae = Sets.<BlockPos>newHashSet();
 
     public RenderGlobal(Minecraft p_i1249_1_)
     {
@@ -396,9 +397,9 @@
             if (d4 < 1.0D && d4 > 0.01D)
             {
                 d4 = 1.0D / Math.sqrt(d4);
-                d0 *= d4;
-                d1 *= d4;
-                d2 *= d4;
+                d0 = d0 * d4;
+                d1 = d1 * d4;
+                d2 = d2 * d4;
                 double d5 = d0 * 100.0D;
                 double d6 = d1 * 100.0D;
                 double d7 = d2 * 100.0D;
@@ -552,8 +553,10 @@
 
     public void func_180446_a(Entity p_180446_1_, ICamera p_180446_2_, float p_180446_3_)
     {
+        int pass = net.minecraftforge.client.MinecraftForgeClient.getRenderPass();
         if (this.field_72740_G > 0)
         {
+            if (pass > 0) return;
             --this.field_72740_G;
         }
         else
@@ -564,9 +567,12 @@
             this.field_72769_h.field_72984_F.func_76320_a("prepare");
             TileEntityRendererDispatcher.field_147556_a.func_190056_a(this.field_72769_h, this.field_72777_q.func_110434_K(), this.field_72777_q.field_71466_p, this.field_72777_q.func_175606_aa(), this.field_72777_q.field_71476_x, p_180446_3_);
             this.field_175010_j.func_180597_a(this.field_72769_h, this.field_72777_q.field_71466_p, this.field_72777_q.func_175606_aa(), this.field_72777_q.field_147125_j, this.field_72777_q.field_71474_y, p_180446_3_);
+            if(pass == 0)
+            {
             this.field_72748_H = 0;
             this.field_72749_I = 0;
             this.field_72750_J = 0;
+            }
             Entity entity = this.field_72777_q.func_175606_aa();
             double d3 = entity.field_70142_S + (entity.field_70165_t - entity.field_70142_S) * (double)p_180446_3_;
             double d4 = entity.field_70137_T + (entity.field_70163_u - entity.field_70137_T) * (double)p_180446_3_;
@@ -578,11 +584,15 @@
             this.field_72777_q.field_71460_t.func_180436_i();
             this.field_72769_h.field_72984_F.func_76318_c("global");
             List<Entity> list = this.field_72769_h.func_72910_y();
+            if (pass == 0)
+            {
             this.field_72748_H = list.size();
+            }
 
             for (int i = 0; i < this.field_72769_h.field_73007_j.size(); ++i)
             {
                 Entity entity1 = this.field_72769_h.field_73007_j.get(i);
+                if (!entity1.shouldRenderInPass(pass)) continue;
                 ++this.field_72749_I;
 
                 if (entity1.func_145770_h(d0, d1, d2))
@@ -592,8 +602,8 @@
             }
 
             this.field_72769_h.field_72984_F.func_76318_c("entities");
-            List<Entity> list1 = Lists.newArrayList();
-            List<Entity> list2 = Lists.newArrayList();
+            List<Entity> list1 = Lists.<Entity>newArrayList();
+            List<Entity> list2 = Lists.<Entity>newArrayList();
             BlockPos.PooledMutableBlockPos blockpos$pooledmutableblockpos = BlockPos.PooledMutableBlockPos.func_185346_s();
 
             for (RenderGlobal.ContainerLocalRenderInformation renderglobal$containerlocalrenderinformation : this.field_72755_R)
@@ -605,13 +615,14 @@
                 {
                     for (Entity entity2 : classinheritancemultimap)
                     {
+                        if(!entity2.shouldRenderInPass(pass)) continue;
                         boolean flag = this.field_175010_j.func_178635_a(entity2, p_180446_2_, d0, d1, d2) || entity2.func_184215_y(this.field_72777_q.field_71439_g);
 
                         if (flag)
                         {
                             boolean flag1 = this.field_72777_q.func_175606_aa() instanceof EntityLivingBase ? ((EntityLivingBase)this.field_72777_q.func_175606_aa()).func_70608_bn() : false;
 
-                            if ((entity2 != this.field_72777_q.func_175606_aa() || this.field_72777_q.field_71474_y.field_74320_O != 0 || flag1) && (!(entity2.field_70163_u >= 0.0D) || !(entity2.field_70163_u < 256.0D) || this.field_72769_h.func_175667_e(blockpos$pooledmutableblockpos.func_189535_a(entity2))))
+                            if ((entity2 != this.field_72777_q.func_175606_aa() || this.field_72777_q.field_71474_y.field_74320_O != 0 || flag1) && (entity2.field_70163_u < 0.0D || entity2.field_70163_u >= 256.0D || this.field_72769_h.func_175667_e(blockpos$pooledmutableblockpos.func_189535_a(entity2))))
                             {
                                 ++this.field_72749_I;
                                 this.field_175010_j.func_188388_a(entity2, p_180446_3_, false);
@@ -641,6 +652,7 @@
                 }
             }
 
+            if(pass == 0)
             if (this.func_174985_d() && (!list1.isEmpty() || this.field_184386_ad))
             {
                 this.field_72769_h.field_72984_F.func_76318_c("entityOutlines");
@@ -680,6 +692,7 @@
             this.field_72769_h.field_72984_F.func_76318_c("blockentities");
             RenderHelper.func_74519_b();
 
+            TileEntityRendererDispatcher.field_147556_a.preDrawBatch();
             for (RenderGlobal.ContainerLocalRenderInformation renderglobal$containerlocalrenderinformation1 : this.field_72755_R)
             {
                 List<TileEntity> list3 = renderglobal$containerlocalrenderinformation1.field_178036_a.func_178571_g().func_178485_b();
@@ -688,6 +701,7 @@
                 {
                     for (TileEntity tileentity2 : list3)
                     {
+                        if (!tileentity2.shouldRenderInPass(pass) || !p_180446_2_.func_78546_a(tileentity2.getRenderBoundingBox())) continue;
                         TileEntityRendererDispatcher.field_147556_a.func_180546_a(tileentity2, p_180446_3_, -1);
                     }
                 }
@@ -697,9 +711,11 @@
             {
                 for (TileEntity tileentity : this.field_181024_n)
                 {
+                    if (!tileentity.shouldRenderInPass(pass) || !p_180446_2_.func_78546_a(tileentity.getRenderBoundingBox())) continue;
                     TileEntityRendererDispatcher.field_147556_a.func_180546_a(tileentity, p_180446_3_, -1);
                 }
             }
+            TileEntityRendererDispatcher.field_147556_a.drawBatch(pass);
 
             this.func_180443_s();
 
@@ -846,8 +862,8 @@
         if (!flag && this.field_147595_R)
         {
             this.field_147595_R = false;
-            this.field_72755_R = Lists.newArrayList();
-            Queue<RenderGlobal.ContainerLocalRenderInformation> queue = Queues.newArrayDeque();
+            this.field_72755_R = Lists.<RenderGlobal.ContainerLocalRenderInformation>newArrayList();
+            Queue<RenderGlobal.ContainerLocalRenderInformation> queue = Queues.<RenderGlobal.ContainerLocalRenderInformation>newArrayDeque();
             Entity.func_184227_b(MathHelper.func_151237_a((double)this.field_72777_q.field_71474_y.field_151451_c / 8.0D, 1.0D, 2.5D));
             boolean flag1 = this.field_72777_q.field_175612_E;
 
@@ -894,7 +910,7 @@
                     {
                         RenderChunk renderchunk1 = this.field_175008_n.func_178161_a(new BlockPos((j << 4) + 8, i, (k << 4) + 8));
 
-                        if (renderchunk1 != null && p_174970_4_.func_78546_a(renderchunk1.field_178591_c))
+                        if (renderchunk1 != null && p_174970_4_.func_78546_a(renderchunk1.field_178591_c.func_72321_a(0.0, blockpos1.func_177956_o() > 0 ? Double.POSITIVE_INFINITY : Double.NEGATIVE_INFINITY, 0.0))) // Forge: fix MC-73139
                         {
                             renderchunk1.func_178577_a(p_174970_5_);
                             queue.add(new RenderGlobal.ContainerLocalRenderInformation(renderchunk1, (EnumFacing)null, 0));
@@ -938,7 +954,7 @@
 
         this.field_72777_q.field_71424_I.func_76318_c("rebuildNear");
         Set<RenderChunk> set = this.field_175009_l;
-        this.field_175009_l = Sets.newLinkedHashSet();
+        this.field_175009_l = Sets.<RenderChunk>newLinkedHashSet();
 
         for (RenderGlobal.ContainerLocalRenderInformation renderglobal$containerlocalrenderinformation2 : this.field_72755_R)
         {
@@ -950,7 +966,7 @@
                 BlockPos blockpos2 = renderchunk4.func_178568_j().func_177982_a(8, 8, 8);
                 boolean flag3 = blockpos2.func_177951_i(blockpos1) < 768.0D;
 
-                if (!renderchunk4.func_188281_o() && !flag3)
+                if (net.minecraftforge.common.ForgeModContainer.alwaysSetupTerrainOffThread || (!renderchunk4.func_188281_o() && !flag3))
                 {
                     this.field_175009_l.add(renderchunk4);
                 }
@@ -1047,10 +1063,10 @@
             f += 180.0F;
         }
 
-        float f2 = MathHelper.func_76134_b(-f1 * ((float)Math.PI / 180F) - (float)Math.PI);
-        float f3 = MathHelper.func_76126_a(-f1 * ((float)Math.PI / 180F) - (float)Math.PI);
-        float f4 = -MathHelper.func_76134_b(-f * ((float)Math.PI / 180F));
-        float f5 = MathHelper.func_76126_a(-f * ((float)Math.PI / 180F));
+        float f2 = MathHelper.func_76134_b(-f1 * 0.017453292F - (float)Math.PI);
+        float f3 = MathHelper.func_76126_a(-f1 * 0.017453292F - (float)Math.PI);
+        float f4 = -MathHelper.func_76134_b(-f * 0.017453292F);
+        float f5 = MathHelper.func_76126_a(-f * 0.017453292F);
         return new Vector3f(f3 * f4, f5, f2 * f4);
     }
 
@@ -1102,7 +1118,10 @@
             }
         }
 
-        this.field_72777_q.field_71424_I.func_194339_b(() -> "render_" + p_174977_1_);
+        this.field_72777_q.field_71424_I.func_194339_b(() ->
+        {
+            return "render_" + p_174977_1_;
+        });
         this.func_174982_a(p_174977_1_);
         this.field_72777_q.field_71424_I.func_76319_b();
         return l;
@@ -1131,7 +1150,7 @@
             for (VertexFormatElement vertexformatelement : DefaultVertexFormats.field_176600_a.func_177343_g())
             {
                 VertexFormatElement.EnumUsage vertexformatelement$enumusage = vertexformatelement.func_177375_c();
-                int i = vertexformatelement.func_177369_e();
+                int k1 = vertexformatelement.func_177369_e();
 
                 switch (vertexformatelement$enumusage)
                 {
@@ -1139,7 +1158,7 @@
                         GlStateManager.func_187429_p(32884);
                         break;
                     case UV:
-                        OpenGlHelper.func_77472_b(OpenGlHelper.field_77478_a + i);
+                        OpenGlHelper.func_77472_b(OpenGlHelper.field_77478_a + k1);
                         GlStateManager.func_187429_p(32888);
                         OpenGlHelper.func_77472_b(OpenGlHelper.field_77478_a);
                         break;
@@ -1158,9 +1177,9 @@
         while (p_174965_1_.hasNext())
         {
             DestroyBlockProgress destroyblockprogress = p_174965_1_.next();
-            int i = destroyblockprogress.func_82743_f();
+            int k1 = destroyblockprogress.func_82743_f();
 
-            if (this.field_72773_u - i > 400)
+            if (this.field_72773_u - k1 > 400)
             {
                 p_174965_1_.remove();
             }
@@ -1184,10 +1203,10 @@
             {
                 BlockPos blockpos = iterator.next();
                 iterator.remove();
-                int i = blockpos.func_177958_n();
-                int j = blockpos.func_177956_o();
-                int k = blockpos.func_177952_p();
-                this.func_184385_a(i - 1, j - 1, k - 1, i + 1, j + 1, k + 1, false);
+                int k1 = blockpos.func_177958_n();
+                int l1 = blockpos.func_177956_o();
+                int i2 = blockpos.func_177952_p();
+                this.func_184385_a(k1 - 1, l1 - 1, i2 - 1, k1 + 1, l1 + 1, i2 + 1, false);
             }
         }
     }
@@ -1204,31 +1223,31 @@
         Tessellator tessellator = Tessellator.func_178181_a();
         BufferBuilder bufferbuilder = tessellator.func_178180_c();
 
-        for (int i = 0; i < 6; ++i)
+        for (int k1 = 0; k1 < 6; ++k1)
         {
             GlStateManager.func_179094_E();
 
-            if (i == 1)
+            if (k1 == 1)
             {
                 GlStateManager.func_179114_b(90.0F, 1.0F, 0.0F, 0.0F);
             }
 
-            if (i == 2)
+            if (k1 == 2)
             {
                 GlStateManager.func_179114_b(-90.0F, 1.0F, 0.0F, 0.0F);
             }
 
-            if (i == 3)
+            if (k1 == 3)
             {
                 GlStateManager.func_179114_b(180.0F, 1.0F, 0.0F, 0.0F);
             }
 
-            if (i == 4)
+            if (k1 == 4)
             {
                 GlStateManager.func_179114_b(90.0F, 0.0F, 0.0F, 1.0F);
             }
 
-            if (i == 5)
+            if (k1 == 5)
             {
                 GlStateManager.func_179114_b(-90.0F, 0.0F, 0.0F, 1.0F);
             }
@@ -1249,6 +1268,13 @@
 
     public void func_174976_a(float p_174976_1_, int p_174976_2_)
     {
+        net.minecraftforge.client.IRenderHandler renderer = this.field_72769_h.field_73011_w.getSkyRenderer();
+        if (renderer != null)
+        {
+            renderer.render(p_174976_1_, field_72769_h, field_72777_q);
+            return;
+        }
+
         if (this.field_72777_q.field_71441_e.field_73011_w.func_186058_p().func_186068_a() == 1)
         {
             this.func_180448_r();
@@ -1323,11 +1349,11 @@
 
                 bufferbuilder.func_181668_a(6, DefaultVertexFormats.field_181706_f);
                 bufferbuilder.func_181662_b(0.0D, 100.0D, 0.0D).func_181666_a(f6, f7, f8, afloat[3]).func_181675_d();
-                int j = 16;
+                int l1 = 16;
 
-                for (int l = 0; l <= 16; ++l)
+                for (int j2 = 0; j2 <= 16; ++j2)
                 {
-                    float f21 = (float)l * ((float)Math.PI * 2F) / 16.0F;
+                    float f21 = (float)j2 * ((float)Math.PI * 2F) / 16.0F;
                     float f12 = MathHelper.func_76126_a(f21);
                     float f13 = MathHelper.func_76134_b(f21);
                     bufferbuilder.func_181662_b((double)(f12 * 120.0F), (double)(f13 * 120.0F), (double)(-f13 * 40.0F * afloat[3])).func_181666_a(afloat[0], afloat[1], afloat[2], 0.0F).func_181675_d();
@@ -1355,13 +1381,13 @@
             tessellator.func_78381_a();
             f17 = 20.0F;
             this.field_72770_i.func_110577_a(field_110927_h);
-            int i = this.field_72769_h.func_72853_d();
-            int k = i % 4;
-            int i1 = i / 4 % 2;
-            float f22 = (float)(k + 0) / 4.0F;
-            float f23 = (float)(i1 + 0) / 2.0F;
-            float f24 = (float)(k + 1) / 4.0F;
-            float f14 = (float)(i1 + 1) / 2.0F;
+            int k1 = this.field_72769_h.func_72853_d();
+            int i2 = k1 % 4;
+            int k2 = k1 / 4 % 2;
+            float f22 = (float)(i2 + 0) / 4.0F;
+            float f23 = (float)(k2 + 0) / 2.0F;
+            float f24 = (float)(i2 + 1) / 4.0F;
+            float f14 = (float)(k2 + 1) / 2.0F;
             bufferbuilder.func_181668_a(7, DefaultVertexFormats.field_181707_g);
             bufferbuilder.func_181662_b((double)(-f17), -100.0D, (double)f17).func_187315_a((double)f24, (double)f14).func_181675_d();
             bufferbuilder.func_181662_b((double)f17, -100.0D, (double)f17).func_187315_a((double)f22, (double)f14).func_181675_d();
@@ -1397,9 +1423,9 @@
             GlStateManager.func_179121_F();
             GlStateManager.func_179090_x();
             GlStateManager.func_179124_c(0.0F, 0.0F, 0.0F);
-            double d0 = this.field_72777_q.field_71439_g.func_174824_e(p_174976_1_).field_72448_b - this.field_72769_h.func_72919_O();
+            double d3 = this.field_72777_q.field_71439_g.func_174824_e(p_174976_1_).field_72448_b - this.field_72769_h.func_72919_O();
 
-            if (d0 < 0.0D)
+            if (d3 < 0.0D)
             {
                 GlStateManager.func_179094_E();
                 GlStateManager.func_179109_b(0.0F, 12.0F, 0.0F);
@@ -1420,7 +1446,7 @@
 
                 GlStateManager.func_179121_F();
                 float f18 = 1.0F;
-                float f19 = -((float)(d0 + 65.0D));
+                float f19 = -((float)(d3 + 65.0D));
                 float f20 = -1.0F;
                 bufferbuilder.func_181668_a(7, DefaultVertexFormats.field_181706_f);
                 bufferbuilder.func_181662_b(-1.0D, (double)f19, 1.0D).func_181669_b(0, 0, 0, 255).func_181675_d();
@@ -1456,7 +1482,7 @@
             }
 
             GlStateManager.func_179094_E();
-            GlStateManager.func_179109_b(0.0F, -((float)(d0 - 16.0D)), 0.0F);
+            GlStateManager.func_179109_b(0.0F, -((float)(d3 - 16.0D)), 0.0F);
             GlStateManager.func_179148_o(this.field_72781_x);
             GlStateManager.func_179121_F();
             GlStateManager.func_179098_w();
@@ -1466,6 +1492,7 @@
 
     public void func_180447_b(float p_180447_1_, int p_180447_2_, double p_180447_3_, double p_180447_5_, double p_180447_7_)
     {
+        if (net.minecraftforge.fml.client.FMLClientHandler.instance().renderClouds(this.field_72773_u, p_180447_1_)) return;
         if (this.field_72777_q.field_71441_e.field_73011_w.func_76569_d())
         {
             if (this.field_72777_q.field_71474_y.func_181147_e() == 2)
@@ -1475,8 +1502,8 @@
             else
             {
                 GlStateManager.func_179129_p();
-                int i = 32;
-                int j = 8;
+                int k1 = 32;
+                int l1 = 8;
                 Tessellator tessellator = Tessellator.func_178181_a();
                 BufferBuilder bufferbuilder = tessellator.func_178180_c();
                 this.field_72770_i.func_110577_a(field_110925_j);
@@ -1498,25 +1525,25 @@
                 }
 
                 float f9 = 4.8828125E-4F;
-                double d2 = (double)((float)this.field_72773_u + p_180447_1_);
-                double d0 = p_180447_3_ + d2 * (double)0.03F;
-                int k = MathHelper.func_76128_c(d0 / 2048.0D);
-                int l = MathHelper.func_76128_c(p_180447_7_ / 2048.0D);
-                d0 -= (double)(k * 2048);
-                double lvt_22_1_ = p_180447_7_ - (double)(l * 2048);
+                double d5 = (double)((float)this.field_72773_u + p_180447_1_);
+                double d3 = p_180447_3_ + d5 * 0.029999999329447746D;
+                int i2 = MathHelper.func_76128_c(d3 / 2048.0D);
+                int j2 = MathHelper.func_76128_c(p_180447_7_ / 2048.0D);
+                d3 = d3 - (double)(i2 * 2048);
+                double lvt_22_1_ = p_180447_7_ - (double)(j2 * 2048);
                 float f6 = this.field_72769_h.field_73011_w.func_76571_f() - (float)p_180447_5_ + 0.33F;
-                float f7 = (float)(d0 * 4.8828125E-4D);
+                float f7 = (float)(d3 * 4.8828125E-4D);
                 float f8 = (float)(lvt_22_1_ * 4.8828125E-4D);
                 bufferbuilder.func_181668_a(7, DefaultVertexFormats.field_181709_i);
 
-                for (int i1 = -256; i1 < 256; i1 += 32)
+                for (int k2 = -256; k2 < 256; k2 += 32)
                 {
-                    for (int j1 = -256; j1 < 256; j1 += 32)
+                    for (int l2 = -256; l2 < 256; l2 += 32)
                     {
-                        bufferbuilder.func_181662_b((double)(i1 + 0), (double)f6, (double)(j1 + 32)).func_187315_a((double)((float)(i1 + 0) * 4.8828125E-4F + f7), (double)((float)(j1 + 32) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
-                        bufferbuilder.func_181662_b((double)(i1 + 32), (double)f6, (double)(j1 + 32)).func_187315_a((double)((float)(i1 + 32) * 4.8828125E-4F + f7), (double)((float)(j1 + 32) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
-                        bufferbuilder.func_181662_b((double)(i1 + 32), (double)f6, (double)(j1 + 0)).func_187315_a((double)((float)(i1 + 32) * 4.8828125E-4F + f7), (double)((float)(j1 + 0) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
-                        bufferbuilder.func_181662_b((double)(i1 + 0), (double)f6, (double)(j1 + 0)).func_187315_a((double)((float)(i1 + 0) * 4.8828125E-4F + f7), (double)((float)(j1 + 0) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
+                        bufferbuilder.func_181662_b((double)(k2 + 0), (double)f6, (double)(l2 + 32)).func_187315_a((double)((float)(k2 + 0) * 4.8828125E-4F + f7), (double)((float)(l2 + 32) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
+                        bufferbuilder.func_181662_b((double)(k2 + 32), (double)f6, (double)(l2 + 32)).func_187315_a((double)((float)(k2 + 32) * 4.8828125E-4F + f7), (double)((float)(l2 + 32) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
+                        bufferbuilder.func_181662_b((double)(k2 + 32), (double)f6, (double)(l2 + 0)).func_187315_a((double)((float)(k2 + 32) * 4.8828125E-4F + f7), (double)((float)(l2 + 0) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
+                        bufferbuilder.func_181662_b((double)(k2 + 0), (double)f6, (double)(l2 + 0)).func_187315_a((double)((float)(k2 + 0) * 4.8828125E-4F + f7), (double)((float)(l2 + 0) * 4.8828125E-4F + f8)).func_181666_a(f, f1, f2, 0.8F).func_181675_d();
                     }
                 }
 
@@ -1540,14 +1567,14 @@
         BufferBuilder bufferbuilder = tessellator.func_178180_c();
         float f = 12.0F;
         float f1 = 4.0F;
-        double d0 = (double)((float)this.field_72773_u + p_180445_1_);
-        double d1 = (p_180445_3_ + d0 * (double)0.03F) / 12.0D;
-        double d2 = p_180445_7_ / 12.0D + (double)0.33F;
+        double d3 = (double)((float)this.field_72773_u + p_180445_1_);
+        double d4 = (p_180445_3_ + d3 * 0.029999999329447746D) / 12.0D;
+        double d5 = p_180445_7_ / 12.0D + 0.33000001311302185D;
         float f2 = this.field_72769_h.field_73011_w.func_76571_f() - (float)p_180445_5_ + 0.33F;
-        int i = MathHelper.func_76128_c(d1 / 2048.0D);
-        int j = MathHelper.func_76128_c(d2 / 2048.0D);
-        d1 -= (double)(i * 2048);
-        d2 -= (double)(j * 2048);
+        int k1 = MathHelper.func_76128_c(d4 / 2048.0D);
+        int l1 = MathHelper.func_76128_c(d5 / 2048.0D);
+        d4 = d4 - (double)(k1 * 2048);
+        d5 = d5 - (double)(l1 * 2048);
         this.field_72770_i.func_110577_a(field_110925_j);
         GlStateManager.func_179147_l();
         GlStateManager.func_187428_a(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE_MINUS_SRC_ALPHA, GlStateManager.SourceFactor.ONE, GlStateManager.DestFactor.ZERO);
@@ -1576,18 +1603,18 @@
         float f13 = f4 * 0.8F;
         float f14 = f5 * 0.8F;
         float f15 = 0.00390625F;
-        float f16 = (float)MathHelper.func_76128_c(d1) * 0.00390625F;
-        float f17 = (float)MathHelper.func_76128_c(d2) * 0.00390625F;
-        float f18 = (float)(d1 - (double)MathHelper.func_76128_c(d1));
-        float f19 = (float)(d2 - (double)MathHelper.func_76128_c(d2));
-        int k = 8;
-        int l = 4;
+        float f16 = (float)MathHelper.func_76128_c(d4) * 0.00390625F;
+        float f17 = (float)MathHelper.func_76128_c(d5) * 0.00390625F;
+        float f18 = (float)(d4 - (double)MathHelper.func_76128_c(d4));
+        float f19 = (float)(d5 - (double)MathHelper.func_76128_c(d5));
+        int i2 = 8;
+        int j2 = 4;
         float f20 = 9.765625E-4F;
         GlStateManager.func_179152_a(12.0F, 1.0F, 12.0F);
 
-        for (int i1 = 0; i1 < 2; ++i1)
+        for (int k2 = 0; k2 < 2; ++k2)
         {
-            if (i1 == 0)
+            if (k2 == 0)
             {
                 GlStateManager.func_179135_a(false, false, false, false);
             }
@@ -1606,13 +1633,13 @@
                 }
             }
 
-            for (int j1 = -3; j1 <= 4; ++j1)
+            for (int l2 = -3; l2 <= 4; ++l2)
             {
-                for (int k1 = -3; k1 <= 4; ++k1)
+                for (int i3 = -3; i3 <= 4; ++i3)
                 {
                     bufferbuilder.func_181668_a(7, DefaultVertexFormats.field_181712_l);
-                    float f21 = (float)(j1 * 8);
-                    float f22 = (float)(k1 * 8);
+                    float f21 = (float)(l2 * 8);
+                    float f22 = (float)(i3 * 8);
                     float f23 = f21 - f18;
                     float f24 = f22 - f19;
 
@@ -1632,47 +1659,47 @@
                         bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 4.0F - 9.765625E-4F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f3, f4, f5, 0.8F).func_181663_c(0.0F, 1.0F, 0.0F).func_181675_d();
                     }
 
-                    if (j1 > -1)
-                    {
-                        for (int l1 = 0; l1 < 8; ++l1)
-                        {
-                            bufferbuilder.func_181662_b((double)(f23 + (float)l1 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)l1 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)l1 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)l1 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)l1 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)l1 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)l1 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)l1 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
-                        }
-                    }
-
-                    if (j1 <= 1)
-                    {
-                        for (int i2 = 0; i2 < 8; ++i2)
-                        {
-                            bufferbuilder.func_181662_b((double)(f23 + (float)i2 + 1.0F - 9.765625E-4F), (double)(f2 + 0.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)i2 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)i2 + 1.0F - 9.765625E-4F), (double)(f2 + 4.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)i2 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)i2 + 1.0F - 9.765625E-4F), (double)(f2 + 4.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)i2 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + (float)i2 + 1.0F - 9.765625E-4F), (double)(f2 + 0.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)i2 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
-                        }
-                    }
-
-                    if (k1 > -1)
-                    {
-                        for (int j2 = 0; j2 < 8; ++j2)
-                        {
-                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + (float)j2 + 0.0F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)j2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 4.0F), (double)(f24 + (float)j2 + 0.0F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)j2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 0.0F), (double)(f24 + (float)j2 + 0.0F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)j2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + (float)j2 + 0.0F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)j2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
-                        }
-                    }
-
-                    if (k1 <= 1)
-                    {
-                        for (int k2 = 0; k2 < 8; ++k2)
-                        {
-                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + (float)k2 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)k2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 4.0F), (double)(f24 + (float)k2 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)k2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 0.0F), (double)(f24 + (float)k2 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)k2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
-                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + (float)k2 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)k2 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
+                    if (l2 > -1)
+                    {
+                        for (int j3 = 0; j3 < 8; ++j3)
+                        {
+                            bufferbuilder.func_181662_b((double)(f23 + (float)j3 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)j3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)j3 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)j3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)j3 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)j3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)j3 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)j3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(-1.0F, 0.0F, 0.0F).func_181675_d();
+                        }
+                    }
+
+                    if (l2 <= 1)
+                    {
+                        for (int k3 = 0; k3 < 8; ++k3)
+                        {
+                            bufferbuilder.func_181662_b((double)(f23 + (float)k3 + 1.0F - 9.765625E-4F), (double)(f2 + 0.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)k3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)k3 + 1.0F - 9.765625E-4F), (double)(f2 + 4.0F), (double)(f24 + 8.0F)).func_187315_a((double)((f21 + (float)k3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 8.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)k3 + 1.0F - 9.765625E-4F), (double)(f2 + 4.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)k3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + (float)k3 + 1.0F - 9.765625E-4F), (double)(f2 + 0.0F), (double)(f24 + 0.0F)).func_187315_a((double)((f21 + (float)k3 + 0.5F) * 0.00390625F + f16), (double)((f22 + 0.0F) * 0.00390625F + f17)).func_181666_a(f25, f26, f27, 0.8F).func_181663_c(1.0F, 0.0F, 0.0F).func_181675_d();
+                        }
+                    }
+
+                    if (i3 > -1)
+                    {
+                        for (int l3 = 0; l3 < 8; ++l3)
+                        {
+                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + (float)l3 + 0.0F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)l3 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 4.0F), (double)(f24 + (float)l3 + 0.0F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)l3 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 0.0F), (double)(f24 + (float)l3 + 0.0F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)l3 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + (float)l3 + 0.0F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)l3 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, -1.0F).func_181675_d();
+                        }
+                    }
+
+                    if (i3 <= 1)
+                    {
+                        for (int i4 = 0; i4 < 8; ++i4)
+                        {
+                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 4.0F), (double)(f24 + (float)i4 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)i4 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 4.0F), (double)(f24 + (float)i4 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)i4 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 8.0F), (double)(f2 + 0.0F), (double)(f24 + (float)i4 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 8.0F) * 0.00390625F + f16), (double)((f22 + (float)i4 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
+                            bufferbuilder.func_181662_b((double)(f23 + 0.0F), (double)(f2 + 0.0F), (double)(f24 + (float)i4 + 1.0F - 9.765625E-4F)).func_187315_a((double)((f21 + 0.0F) * 0.00390625F + f16), (double)((f22 + (float)i4 + 0.5F) * 0.00390625F + f17)).func_181666_a(f12, f13, f14, 0.8F).func_181663_c(0.0F, 0.0F, 1.0F).func_181675_d();
                         }
                     }
 
@@ -1696,28 +1723,28 @@
 
             while (iterator.hasNext())
             {
-                RenderChunk renderchunk = iterator.next();
-                boolean flag;
+                RenderChunk renderchunk1 = iterator.next();
+                boolean flag1;
 
-                if (renderchunk.func_188281_o())
+                if (renderchunk1.func_188281_o())
                 {
-                    flag = this.field_174995_M.func_178505_b(renderchunk);
+                    flag1 = this.field_174995_M.func_178505_b(renderchunk1);
                 }
                 else
                 {
-                    flag = this.field_174995_M.func_178507_a(renderchunk);
+                    flag1 = this.field_174995_M.func_178507_a(renderchunk1);
                 }
 
-                if (!flag)
+                if (!flag1)
                 {
                     break;
                 }
 
-                renderchunk.func_188282_m();
+                renderchunk1.func_188282_m();
                 iterator.remove();
-                long i = p_174967_1_ - System.nanoTime();
+                long k1 = p_174967_1_ - System.nanoTime();
 
-                if (i < 0L)
+                if (k1 < 0L)
                 {
                     break;
                 }
@@ -1730,25 +1757,25 @@
         Tessellator tessellator = Tessellator.func_178181_a();
         BufferBuilder bufferbuilder = tessellator.func_178180_c();
         WorldBorder worldborder = this.field_72769_h.func_175723_af();
-        double d0 = (double)(this.field_72777_q.field_71474_y.field_151451_c * 16);
+        double d3 = (double)(this.field_72777_q.field_71474_y.field_151451_c * 16);
 
-        if (!(p_180449_1_.field_70165_t < worldborder.func_177728_d() - d0) || !(p_180449_1_.field_70165_t > worldborder.func_177726_b() + d0) || !(p_180449_1_.field_70161_v < worldborder.func_177733_e() - d0) || !(p_180449_1_.field_70161_v > worldborder.func_177736_c() + d0))
+        if (p_180449_1_.field_70165_t >= worldborder.func_177728_d() - d3 || p_180449_1_.field_70165_t <= worldborder.func_177726_b() + d3 || p_180449_1_.field_70161_v >= worldborder.func_177733_e() - d3 || p_180449_1_.field_70161_v <= worldborder.func_177736_c() + d3)
         {
-            double d1 = 1.0D - worldborder.func_177745_a(p_180449_1_) / d0;
-            d1 = Math.pow(d1, 4.0D);
-            double d2 = p_180449_1_.field_70142_S + (p_180449_1_.field_70165_t - p_180449_1_.field_70142_S) * (double)p_180449_2_;
-            double d3 = p_180449_1_.field_70137_T + (p_180449_1_.field_70163_u - p_180449_1_.field_70137_T) * (double)p_180449_2_;
-            double d4 = p_180449_1_.field_70136_U + (p_180449_1_.field_70161_v - p_180449_1_.field_70136_U) * (double)p_180449_2_;
+            double d4 = 1.0D - worldborder.func_177745_a(p_180449_1_) / d3;
+            d4 = Math.pow(d4, 4.0D);
+            double d5 = p_180449_1_.field_70142_S + (p_180449_1_.field_70165_t - p_180449_1_.field_70142_S) * (double)p_180449_2_;
+            double d6 = p_180449_1_.field_70137_T + (p_180449_1_.field_70163_u - p_180449_1_.field_70137_T) * (double)p_180449_2_;
+            double d7 = p_180449_1_.field_70136_U + (p_180449_1_.field_70161_v - p_180449_1_.field_70136_U) * (double)p_180449_2_;
             GlStateManager.func_179147_l();
             GlStateManager.func_187428_a(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE, GlStateManager.SourceFactor.ONE, GlStateManager.DestFactor.ZERO);
             this.field_72770_i.func_110577_a(field_175006_g);
             GlStateManager.func_179132_a(false);
             GlStateManager.func_179094_E();
-            int i = worldborder.func_177734_a().func_177766_a();
-            float f = (float)(i >> 16 & 255) / 255.0F;
-            float f1 = (float)(i >> 8 & 255) / 255.0F;
-            float f2 = (float)(i & 255) / 255.0F;
-            GlStateManager.func_179131_c(f, f1, f2, (float)d1);
+            int k1 = worldborder.func_177734_a().func_177766_a();
+            float f = (float)(k1 >> 16 & 255) / 255.0F;
+            float f1 = (float)(k1 >> 8 & 255) / 255.0F;
+            float f2 = (float)(k1 & 255) / 255.0F;
+            GlStateManager.func_179131_c(f, f1, f2, (float)d4);
             GlStateManager.func_179136_a(-3.0F, -3.0F);
             GlStateManager.func_179088_q();
             GlStateManager.func_179092_a(516, 0.1F);
@@ -1759,74 +1786,74 @@
             float f5 = 0.0F;
             float f6 = 128.0F;
             bufferbuilder.func_181668_a(7, DefaultVertexFormats.field_181707_g);
-            bufferbuilder.func_178969_c(-d2, -d3, -d4);
-            double d5 = Math.max((double)MathHelper.func_76128_c(d4 - d0), worldborder.func_177736_c());
-            double d6 = Math.min((double)MathHelper.func_76143_f(d4 + d0), worldborder.func_177733_e());
+            bufferbuilder.func_178969_c(-d5, -d6, -d7);
+            double d8 = Math.max((double)MathHelper.func_76128_c(d7 - d3), worldborder.func_177736_c());
+            double d9 = Math.min((double)MathHelper.func_76143_f(d7 + d3), worldborder.func_177733_e());
 
-            if (d2 > worldborder.func_177728_d() - d0)
+            if (d5 > worldborder.func_177728_d() - d3)
             {
                 float f7 = 0.0F;
 
-                for (double d7 = d5; d7 < d6; f7 += 0.5F)
+                for (double d10 = d8; d10 < d9; f7 += 0.5F)
                 {
-                    double d8 = Math.min(1.0D, d6 - d7);
-                    float f8 = (float)d8 * 0.5F;
-                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 256.0D, d7).func_187315_a((double)(f3 + f7), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 256.0D, d7 + d8).func_187315_a((double)(f3 + f8 + f7), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 0.0D, d7 + d8).func_187315_a((double)(f3 + f8 + f7), (double)(f3 + 128.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 0.0D, d7).func_187315_a((double)(f3 + f7), (double)(f3 + 128.0F)).func_181675_d();
-                    ++d7;
+                    double d11 = Math.min(1.0D, d9 - d10);
+                    float f8 = (float)d11 * 0.5F;
+                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 256.0D, d10).func_187315_a((double)(f3 + f7), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 256.0D, d10 + d11).func_187315_a((double)(f3 + f8 + f7), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 0.0D, d10 + d11).func_187315_a((double)(f3 + f8 + f7), (double)(f3 + 128.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177728_d(), 0.0D, d10).func_187315_a((double)(f3 + f7), (double)(f3 + 128.0F)).func_181675_d();
+                    ++d10;
                 }
             }
 
-            if (d2 < worldborder.func_177726_b() + d0)
+            if (d5 < worldborder.func_177726_b() + d3)
             {
                 float f9 = 0.0F;
 
-                for (double d9 = d5; d9 < d6; f9 += 0.5F)
+                for (double d12 = d8; d12 < d9; f9 += 0.5F)
                 {
-                    double d12 = Math.min(1.0D, d6 - d9);
-                    float f12 = (float)d12 * 0.5F;
-                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 256.0D, d9).func_187315_a((double)(f3 + f9), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 256.0D, d9 + d12).func_187315_a((double)(f3 + f12 + f9), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 0.0D, d9 + d12).func_187315_a((double)(f3 + f12 + f9), (double)(f3 + 128.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 0.0D, d9).func_187315_a((double)(f3 + f9), (double)(f3 + 128.0F)).func_181675_d();
-                    ++d9;
+                    double d15 = Math.min(1.0D, d9 - d12);
+                    float f12 = (float)d15 * 0.5F;
+                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 256.0D, d12).func_187315_a((double)(f3 + f9), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 256.0D, d12 + d15).func_187315_a((double)(f3 + f12 + f9), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 0.0D, d12 + d15).func_187315_a((double)(f3 + f12 + f9), (double)(f3 + 128.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(worldborder.func_177726_b(), 0.0D, d12).func_187315_a((double)(f3 + f9), (double)(f3 + 128.0F)).func_181675_d();
+                    ++d12;
                 }
             }
 
-            d5 = Math.max((double)MathHelper.func_76128_c(d2 - d0), worldborder.func_177726_b());
-            d6 = Math.min((double)MathHelper.func_76143_f(d2 + d0), worldborder.func_177728_d());
+            d8 = Math.max((double)MathHelper.func_76128_c(d5 - d3), worldborder.func_177726_b());
+            d9 = Math.min((double)MathHelper.func_76143_f(d5 + d3), worldborder.func_177728_d());
 
-            if (d4 > worldborder.func_177733_e() - d0)
+            if (d7 > worldborder.func_177733_e() - d3)
             {
                 float f10 = 0.0F;
 
-                for (double d10 = d5; d10 < d6; f10 += 0.5F)
+                for (double d13 = d8; d13 < d9; f10 += 0.5F)
                 {
-                    double d13 = Math.min(1.0D, d6 - d10);
-                    float f13 = (float)d13 * 0.5F;
-                    bufferbuilder.func_181662_b(d10, 256.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f10), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d10 + d13, 256.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f13 + f10), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d10 + d13, 0.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f13 + f10), (double)(f3 + 128.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d10, 0.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f10), (double)(f3 + 128.0F)).func_181675_d();
-                    ++d10;
+                    double d16 = Math.min(1.0D, d9 - d13);
+                    float f13 = (float)d16 * 0.5F;
+                    bufferbuilder.func_181662_b(d13, 256.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f10), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d13 + d16, 256.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f13 + f10), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d13 + d16, 0.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f13 + f10), (double)(f3 + 128.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d13, 0.0D, worldborder.func_177733_e()).func_187315_a((double)(f3 + f10), (double)(f3 + 128.0F)).func_181675_d();
+                    ++d13;
                 }
             }
 
-            if (d4 < worldborder.func_177736_c() + d0)
+            if (d7 < worldborder.func_177736_c() + d3)
             {
                 float f11 = 0.0F;
 
-                for (double d11 = d5; d11 < d6; f11 += 0.5F)
+                for (double d14 = d8; d14 < d9; f11 += 0.5F)
                 {
-                    double d14 = Math.min(1.0D, d6 - d11);
-                    float f14 = (float)d14 * 0.5F;
-                    bufferbuilder.func_181662_b(d11, 256.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f11), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d11 + d14, 256.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f14 + f11), (double)(f3 + 0.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d11 + d14, 0.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f14 + f11), (double)(f3 + 128.0F)).func_181675_d();
-                    bufferbuilder.func_181662_b(d11, 0.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f11), (double)(f3 + 128.0F)).func_181675_d();
-                    ++d11;
+                    double d17 = Math.min(1.0D, d9 - d14);
+                    float f14 = (float)d17 * 0.5F;
+                    bufferbuilder.func_181662_b(d14, 256.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f11), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d14 + d17, 256.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f14 + f11), (double)(f3 + 0.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d14 + d17, 0.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f14 + f11), (double)(f3 + 128.0F)).func_181675_d();
+                    bufferbuilder.func_181662_b(d14, 0.0D, worldborder.func_177736_c()).func_187315_a((double)(f3 + f11), (double)(f3 + 128.0F)).func_181675_d();
+                    ++d14;
                 }
             }
 
@@ -1848,7 +1875,8 @@
         GlStateManager.func_187428_a(GlStateManager.SourceFactor.DST_COLOR, GlStateManager.DestFactor.SRC_COLOR, GlStateManager.SourceFactor.ONE, GlStateManager.DestFactor.ZERO);
         GlStateManager.func_179147_l();
         GlStateManager.func_179131_c(1.0F, 1.0F, 1.0F, 0.5F);
-        GlStateManager.func_179136_a(-3.0F, -3.0F);
+        // FORGE: Fix MC-234
+        GlStateManager.func_179136_a(-1.0F, -10.0F);
         GlStateManager.func_179088_q();
         GlStateManager.func_179092_a(516, 0.1F);
         GlStateManager.func_179141_d();
@@ -1867,16 +1895,16 @@
 
     public void func_174981_a(Tessellator p_174981_1_, BufferBuilder p_174981_2_, Entity p_174981_3_, float p_174981_4_)
     {
-        double d0 = p_174981_3_.field_70142_S + (p_174981_3_.field_70165_t - p_174981_3_.field_70142_S) * (double)p_174981_4_;
-        double d1 = p_174981_3_.field_70137_T + (p_174981_3_.field_70163_u - p_174981_3_.field_70137_T) * (double)p_174981_4_;
-        double d2 = p_174981_3_.field_70136_U + (p_174981_3_.field_70161_v - p_174981_3_.field_70136_U) * (double)p_174981_4_;
+        double d3 = p_174981_3_.field_70142_S + (p_174981_3_.field_70165_t - p_174981_3_.field_70142_S) * (double)p_174981_4_;
+        double d4 = p_174981_3_.field_70137_T + (p_174981_3_.field_70163_u - p_174981_3_.field_70137_T) * (double)p_174981_4_;
+        double d5 = p_174981_3_.field_70136_U + (p_174981_3_.field_70161_v - p_174981_3_.field_70136_U) * (double)p_174981_4_;
 
         if (!this.field_72738_E.isEmpty())
         {
             this.field_72770_i.func_110577_a(TextureMap.field_110575_b);
             this.func_180443_s();
             p_174981_2_.func_181668_a(7, DefaultVertexFormats.field_176600_a);
-            p_174981_2_.func_178969_c(-d0, -d1, -d2);
+            p_174981_2_.func_178969_c(-d3, -d4, -d5);
             p_174981_2_.func_78914_f();
             Iterator<DestroyBlockProgress> iterator = this.field_72738_E.values().iterator();
 
@@ -1884,14 +1912,17 @@
             {
                 DestroyBlockProgress destroyblockprogress = iterator.next();
                 BlockPos blockpos = destroyblockprogress.func_180246_b();
-                double d3 = (double)blockpos.func_177958_n() - d0;
-                double d4 = (double)blockpos.func_177956_o() - d1;
-                double d5 = (double)blockpos.func_177952_p() - d2;
+                double d6 = (double)blockpos.func_177958_n() - d3;
+                double d7 = (double)blockpos.func_177956_o() - d4;
+                double d8 = (double)blockpos.func_177952_p() - d5;
                 Block block = this.field_72769_h.func_180495_p(blockpos).func_177230_c();
+                TileEntity te = this.field_72769_h.func_175625_s(blockpos);
+                boolean hasBreak = block instanceof BlockChest || block instanceof BlockEnderChest || block instanceof BlockSign || block instanceof BlockSkull;
+                if (!hasBreak) hasBreak = te != null && te.canRenderBreaking();
 
-                if (!(block instanceof BlockChest) && !(block instanceof BlockEnderChest) && !(block instanceof BlockSign) && !(block instanceof BlockSkull))
+                if (!hasBreak)
                 {
-                    if (d3 * d3 + d4 * d4 + d5 * d5 > 1024.0D)
+                    if (d6 * d6 + d7 * d7 + d8 * d8 > 1024.0D)
                     {
                         iterator.remove();
                     }
@@ -1901,8 +1932,8 @@
 
                         if (iblockstate.func_185904_a() != Material.field_151579_a)
                         {
-                            int i = destroyblockprogress.func_73106_e();
-                            TextureAtlasSprite textureatlassprite = this.field_94141_F[i];
+                            int k1 = destroyblockprogress.func_73106_e();
+                            TextureAtlasSprite textureatlassprite = this.field_94141_F[k1];
                             BlockRendererDispatcher blockrendererdispatcher = this.field_72777_q.func_175602_ab();
                             blockrendererdispatcher.func_175020_a(iblockstate, blockpos, textureatlassprite, this.field_72769_h);
                         }
@@ -1930,10 +1961,10 @@
 
             if (iblockstate.func_185904_a() != Material.field_151579_a && this.field_72769_h.func_175723_af().func_177746_a(blockpos))
             {
-                double d0 = p_72731_1_.field_70142_S + (p_72731_1_.field_70165_t - p_72731_1_.field_70142_S) * (double)p_72731_4_;
-                double d1 = p_72731_1_.field_70137_T + (p_72731_1_.field_70163_u - p_72731_1_.field_70137_T) * (double)p_72731_4_;
-                double d2 = p_72731_1_.field_70136_U + (p_72731_1_.field_70161_v - p_72731_1_.field_70136_U) * (double)p_72731_4_;
-                func_189697_a(iblockstate.func_185918_c(this.field_72769_h, blockpos).func_186662_g((double)0.002F).func_72317_d(-d0, -d1, -d2), 0.0F, 0.0F, 0.0F, 0.4F);
+                double d3 = p_72731_1_.field_70142_S + (p_72731_1_.field_70165_t - p_72731_1_.field_70142_S) * (double)p_72731_4_;
+                double d4 = p_72731_1_.field_70137_T + (p_72731_1_.field_70163_u - p_72731_1_.field_70137_T) * (double)p_72731_4_;
+                double d5 = p_72731_1_.field_70136_U + (p_72731_1_.field_70161_v - p_72731_1_.field_70136_U) * (double)p_72731_4_;
+                func_189697_a(iblockstate.func_185918_c(this.field_72769_h, blockpos).func_186662_g(0.0020000000949949026D).func_72317_d(-d3, -d4, -d5), 0.0F, 0.0F, 0.0F, 0.4F);
             }
 
             GlStateManager.func_179132_a(true);
@@ -2033,10 +2064,10 @@
 
     public void func_184376_a(World p_184376_1_, BlockPos p_184376_2_, IBlockState p_184376_3_, IBlockState p_184376_4_, int p_184376_5_)
     {
-        int i = p_184376_2_.func_177958_n();
-        int j = p_184376_2_.func_177956_o();
-        int k = p_184376_2_.func_177952_p();
-        this.func_184385_a(i - 1, j - 1, k - 1, i + 1, j + 1, k + 1, (p_184376_5_ & 8) != 0);
+        int k1 = p_184376_2_.func_177958_n();
+        int l1 = p_184376_2_.func_177956_o();
+        int i2 = p_184376_2_.func_177952_p();
+        this.func_184385_a(k1 - 1, l1 - 1, i2 - 1, k1 + 1, l1 + 1, i2 + 1, (p_184376_5_ & 8) != 0);
     }
 
     public void func_174959_b(BlockPos p_174959_1_)
@@ -2103,7 +2134,7 @@
         {
             CrashReport crashreport = CrashReport.func_85055_a(throwable, "Exception while adding particle");
             CrashReportCategory crashreportcategory = crashreport.func_85058_a("Particle being added");
-            crashreportcategory.func_71507_a("ID", p_190570_1_);
+            crashreportcategory.func_71507_a("ID", Integer.valueOf(p_190570_1_));
 
             if (p_190570_16_ != null)
             {
@@ -2139,22 +2170,22 @@
 
         if (this.field_72777_q != null && entity != null && this.field_72777_q.field_71452_i != null)
         {
-            int i = this.func_190572_a(p_190571_3_);
-            double d0 = entity.field_70165_t - p_190571_4_;
-            double d1 = entity.field_70163_u - p_190571_6_;
-            double d2 = entity.field_70161_v - p_190571_8_;
+            int k1 = this.func_190572_a(p_190571_3_);
+            double d3 = entity.field_70165_t - p_190571_4_;
+            double d4 = entity.field_70163_u - p_190571_6_;
+            double d5 = entity.field_70161_v - p_190571_8_;
 
             if (p_190571_2_)
             {
                 return this.field_72777_q.field_71452_i.func_178927_a(p_190571_1_, p_190571_4_, p_190571_6_, p_190571_8_, p_190571_10_, p_190571_12_, p_190571_14_, p_190571_16_);
             }
-            else if (d0 * d0 + d1 * d1 + d2 * d2 > 1024.0D)
+            else if (d3 * d3 + d4 * d4 + d5 * d5 > 1024.0D)
             {
                 return null;
             }
             else
             {
-                return i > 1 ? null : this.field_72777_q.field_71452_i.func_178927_a(p_190571_1_, p_190571_4_, p_190571_6_, p_190571_8_, p_190571_10_, p_190571_12_, p_190571_14_, p_190571_16_);
+                return k1 > 1 ? null : this.field_72777_q.field_71452_i.func_178927_a(p_190571_1_, p_190571_4_, p_190571_6_, p_190571_8_, p_190571_10_, p_190571_12_, p_190571_14_, p_190571_16_);
             }
         }
         else
@@ -2165,19 +2196,19 @@
 
     private int func_190572_a(boolean p_190572_1_)
     {
-        int i = this.field_72777_q.field_71474_y.field_74362_aa;
-
-        if (p_190572_1_ && i == 2 && this.field_72769_h.field_73012_v.nextInt(10) == 0)
-        {
-            i = 1;
-        }
-
-        if (i == 1 && this.field_72769_h.field_73012_v.nextInt(3) == 0)
-        {
-            i = 2;
-        }
-
-        return i;
+        int k1 = this.field_72777_q.field_71474_y.field_74362_aa;
+
+        if (p_190572_1_ && k1 == 2 && this.field_72769_h.field_73012_v.nextInt(10) == 0)
+        {
+            k1 = 1;
+        }
+
+        if (k1 == 1 && this.field_72769_h.field_73012_v.nextInt(3) == 0)
+        {
+            k1 = 2;
+        }
+
+        return k1;
     }
 
     public void func_72703_a(Entity p_72703_1_)
@@ -2203,32 +2234,32 @@
 
                 if (entity != null)
                 {
-                    double d0 = (double)p_180440_2_.func_177958_n() - entity.field_70165_t;
-                    double d1 = (double)p_180440_2_.func_177956_o() - entity.field_70163_u;
-                    double d2 = (double)p_180440_2_.func_177952_p() - entity.field_70161_v;
-                    double d3 = Math.sqrt(d0 * d0 + d1 * d1 + d2 * d2);
-                    double d4 = entity.field_70165_t;
-                    double d5 = entity.field_70163_u;
-                    double d6 = entity.field_70161_v;
+                    double d3 = (double)p_180440_2_.func_177958_n() - entity.field_70165_t;
+                    double d4 = (double)p_180440_2_.func_177956_o() - entity.field_70163_u;
+                    double d5 = (double)p_180440_2_.func_177952_p() - entity.field_70161_v;
+                    double d6 = Math.sqrt(d3 * d3 + d4 * d4 + d5 * d5);
+                    double d7 = entity.field_70165_t;
+                    double d8 = entity.field_70163_u;
+                    double d9 = entity.field_70161_v;
 
-                    if (d3 > 0.0D)
+                    if (d6 > 0.0D)
                     {
-                        d4 += d0 / d3 * 2.0D;
-                        d5 += d1 / d3 * 2.0D;
-                        d6 += d2 / d3 * 2.0D;
+                        d7 += d3 / d6 * 2.0D;
+                        d8 += d4 / d6 * 2.0D;
+                        d9 += d5 / d6 * 2.0D;
                     }
 
                     if (p_180440_1_ == 1023)
                     {
-                        this.field_72769_h.func_184134_a(d4, d5, d6, SoundEvents.field_187855_gD, SoundCategory.HOSTILE, 1.0F, 1.0F, false);
+                        this.field_72769_h.func_184134_a(d7, d8, d9, SoundEvents.field_187855_gD, SoundCategory.HOSTILE, 1.0F, 1.0F, false);
                     }
                     else if (p_180440_1_ == 1038)
                     {
-                        this.field_72769_h.func_184134_a(d4, d5, d6, SoundEvents.field_193782_bq, SoundCategory.HOSTILE, 1.0F, 1.0F, false);
+                        this.field_72769_h.func_184134_a(d7, d8, d9, SoundEvents.field_193782_bq, SoundCategory.HOSTILE, 1.0F, 1.0F, false);
                     }
                     else
                     {
-                        this.field_72769_h.func_184134_a(d4, d5, d6, SoundEvents.field_187522_aL, SoundCategory.HOSTILE, 5.0F, 1.0F, false);
+                        this.field_72769_h.func_184134_a(d7, d8, d9, SoundEvents.field_187522_aL, SoundCategory.HOSTILE, 5.0F, 1.0F, false);
                     }
                 }
 
@@ -2360,31 +2391,31 @@
                 this.field_72769_h.func_184156_a(p_180439_3_, SoundEvents.field_187617_cK, SoundCategory.BLOCKS, 1.0F, this.field_72769_h.field_73012_v.nextFloat() * 0.1F + 0.9F, false);
                 break;
             case 2000:
-                int l = p_180439_4_ % 3 - 1;
-                int i = p_180439_4_ / 3 % 3 - 1;
-                double d8 = (double)p_180439_3_.func_177958_n() + (double)l * 0.6D + 0.5D;
-                double d10 = (double)p_180439_3_.func_177956_o() + 0.5D;
-                double d12 = (double)p_180439_3_.func_177952_p() + (double)i * 0.6D + 0.5D;
+                int j2 = p_180439_4_ % 3 - 1;
+                int k1 = p_180439_4_ / 3 % 3 - 1;
+                double d11 = (double)p_180439_3_.func_177958_n() + (double)j2 * 0.6D + 0.5D;
+                double d13 = (double)p_180439_3_.func_177956_o() + 0.5D;
+                double d15 = (double)p_180439_3_.func_177952_p() + (double)k1 * 0.6D + 0.5D;
 
-                for (int j1 = 0; j1 < 10; ++j1)
+                for (int l2 = 0; l2 < 10; ++l2)
                 {
-                    double d13 = random.nextDouble() * 0.2D + 0.01D;
-                    double d16 = d8 + (double)l * 0.01D + (random.nextDouble() - 0.5D) * (double)i * 0.5D;
-                    double d19 = d10 + (random.nextDouble() - 0.5D) * 0.5D;
-                    double d22 = d12 + (double)i * 0.01D + (random.nextDouble() - 0.5D) * (double)l * 0.5D;
-                    double d24 = (double)l * d13 + random.nextGaussian() * 0.01D;
-                    double d26 = -0.03D + random.nextGaussian() * 0.01D;
-                    double d27 = (double)i * d13 + random.nextGaussian() * 0.01D;
-                    this.func_174972_a(EnumParticleTypes.SMOKE_NORMAL, d16, d19, d22, d24, d26, d27);
+                    double d16 = random.nextDouble() * 0.2D + 0.01D;
+                    double d19 = d11 + (double)j2 * 0.01D + (random.nextDouble() - 0.5D) * (double)k1 * 0.5D;
+                    double d22 = d13 + (random.nextDouble() - 0.5D) * 0.5D;
+                    double d25 = d15 + (double)k1 * 0.01D + (random.nextDouble() - 0.5D) * (double)j2 * 0.5D;
+                    double d27 = (double)j2 * d16 + random.nextGaussian() * 0.01D;
+                    double d29 = -0.03D + random.nextGaussian() * 0.01D;
+                    double d30 = (double)k1 * d16 + random.nextGaussian() * 0.01D;
+                    this.func_174972_a(EnumParticleTypes.SMOKE_NORMAL, d19, d22, d25, d27, d29, d30);
                 }
 
-                break;
+                return;
             case 2001:
                 Block block = Block.func_149729_e(p_180439_4_ & 4095);
 
                 if (block.func_176223_P().func_185904_a() != Material.field_151579_a)
                 {
-                    SoundType soundtype = block.func_185467_w();
+                    SoundType soundtype = block.getSoundType(Block.func_176220_d(p_180439_4_), field_72769_h, p_180439_3_, null);
                     this.field_72769_h.func_184156_a(p_180439_3_, soundtype.func_185845_c(), SoundCategory.BLOCKS, (soundtype.func_185843_a() + 1.0F) / 2.0F, soundtype.func_185847_b() * 0.8F, false);
                 }
 
@@ -2392,13 +2423,13 @@
                 break;
             case 2002:
             case 2007:
-                double d6 = (double)p_180439_3_.func_177958_n();
-                double d7 = (double)p_180439_3_.func_177956_o();
-                double d9 = (double)p_180439_3_.func_177952_p();
+                double d9 = (double)p_180439_3_.func_177958_n();
+                double d10 = (double)p_180439_3_.func_177956_o();
+                double d12 = (double)p_180439_3_.func_177952_p();
 
-                for (int i1 = 0; i1 < 8; ++i1)
+                for (int k2 = 0; k2 < 8; ++k2)
                 {
-                    this.func_174972_a(EnumParticleTypes.ITEM_CRACK, d6, d7, d9, random.nextGaussian() * 0.15D, random.nextDouble() * 0.2D, random.nextGaussian() * 0.15D, Item.func_150891_b(Items.field_185155_bH));
+                    this.func_174972_a(EnumParticleTypes.ITEM_CRACK, d9, d10, d12, random.nextGaussian() * 0.15D, random.nextDouble() * 0.2D, random.nextGaussian() * 0.15D, Item.func_150891_b(Items.field_185155_bH));
                 }
 
                 float f5 = (float)(p_180439_4_ >> 16 & 255) / 255.0F;
@@ -2406,67 +2437,67 @@
                 float f1 = (float)(p_180439_4_ >> 0 & 255) / 255.0F;
                 EnumParticleTypes enumparticletypes = p_180439_2_ == 2007 ? EnumParticleTypes.SPELL_INSTANT : EnumParticleTypes.SPELL;
 
-                for (int l1 = 0; l1 < 100; ++l1)
+                for (int j3 = 0; j3 < 100; ++j3)
                 {
-                    double d15 = random.nextDouble() * 4.0D;
-                    double d18 = random.nextDouble() * Math.PI * 2.0D;
-                    double d21 = Math.cos(d18) * d15;
-                    double d23 = 0.01D + random.nextDouble() * 0.5D;
-                    double d25 = Math.sin(d18) * d15;
-                    Particle particle1 = this.func_174974_b(enumparticletypes.func_179348_c(), enumparticletypes.func_179344_e(), d6 + d21 * 0.1D, d7 + 0.3D, d9 + d25 * 0.1D, d21, d23, d25);
+                    double d18 = random.nextDouble() * 4.0D;
+                    double d21 = random.nextDouble() * Math.PI * 2.0D;
+                    double d24 = Math.cos(d21) * d18;
+                    double d26 = 0.01D + random.nextDouble() * 0.5D;
+                    double d28 = Math.sin(d21) * d18;
+                    Particle particle1 = this.func_174974_b(enumparticletypes.func_179348_c(), enumparticletypes.func_179344_e(), d9 + d24 * 0.1D, d10 + 0.3D, d12 + d28 * 0.1D, d24, d26, d28);
 
                     if (particle1 != null)
                     {
                         float f4 = 0.75F + random.nextFloat() * 0.25F;
                         particle1.func_70538_b(f5 * f4, f * f4, f1 * f4);
-                        particle1.func_70543_e((float)d15);
+                        particle1.func_70543_e((float)d18);
                     }
                 }
 
                 this.field_72769_h.func_184156_a(p_180439_3_, SoundEvents.field_187825_fO, SoundCategory.NEUTRAL, 1.0F, this.field_72769_h.field_73012_v.nextFloat() * 0.1F + 0.9F, false);
                 break;
             case 2003:
-                double d0 = (double)p_180439_3_.func_177958_n() + 0.5D;
-                double d1 = (double)p_180439_3_.func_177956_o();
-                double d2 = (double)p_180439_3_.func_177952_p() + 0.5D;
-
-                for (int j = 0; j < 8; ++j)
-                {
-                    this.func_174972_a(EnumParticleTypes.ITEM_CRACK, d0, d1, d2, random.nextGaussian() * 0.15D, random.nextDouble() * 0.2D, random.nextGaussian() * 0.15D, Item.func_150891_b(Items.field_151061_bv));
-                }
-
-                for (double d11 = 0.0D; d11 < (Math.PI * 2D); d11 += 0.15707963267948966D)
-                {
-                    this.func_174972_a(EnumParticleTypes.PORTAL, d0 + Math.cos(d11) * 5.0D, d1 - 0.4D, d2 + Math.sin(d11) * 5.0D, Math.cos(d11) * -5.0D, 0.0D, Math.sin(d11) * -5.0D);
-                    this.func_174972_a(EnumParticleTypes.PORTAL, d0 + Math.cos(d11) * 5.0D, d1 - 0.4D, d2 + Math.sin(d11) * 5.0D, Math.cos(d11) * -7.0D, 0.0D, Math.sin(d11) * -7.0D);
-                }
-
-                break;
+                double d3 = (double)p_180439_3_.func_177958_n() + 0.5D;
+                double d4 = (double)p_180439_3_.func_177956_o();
+                double d5 = (double)p_180439_3_.func_177952_p() + 0.5D;
+
+                for (int l1 = 0; l1 < 8; ++l1)
+                {
+                    this.func_174972_a(EnumParticleTypes.ITEM_CRACK, d3, d4, d5, random.nextGaussian() * 0.15D, random.nextDouble() * 0.2D, random.nextGaussian() * 0.15D, Item.func_150891_b(Items.field_151061_bv));
+                }
+
+                for (double d14 = 0.0D; d14 < (Math.PI * 2D); d14 += 0.15707963267948966D)
+                {
+                    this.func_174972_a(EnumParticleTypes.PORTAL, d3 + Math.cos(d14) * 5.0D, d4 - 0.4D, d5 + Math.sin(d14) * 5.0D, Math.cos(d14) * -5.0D, 0.0D, Math.sin(d14) * -5.0D);
+                    this.func_174972_a(EnumParticleTypes.PORTAL, d3 + Math.cos(d14) * 5.0D, d4 - 0.4D, d5 + Math.sin(d14) * 5.0D, Math.cos(d14) * -7.0D, 0.0D, Math.sin(d14) * -7.0D);
+                }
+
+                return;
             case 2004:
 
-                for (int k1 = 0; k1 < 20; ++k1)
+                for (int i3 = 0; i3 < 20; ++i3)
                 {
-                    double d14 = (double)p_180439_3_.func_177958_n() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
-                    double d17 = (double)p_180439_3_.func_177956_o() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
-                    double d20 = (double)p_180439_3_.func_177952_p() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
-                    this.field_72769_h.func_175688_a(EnumParticleTypes.SMOKE_NORMAL, d14, d17, d20, 0.0D, 0.0D, 0.0D, new int[0]);
-                    this.field_72769_h.func_175688_a(EnumParticleTypes.FLAME, d14, d17, d20, 0.0D, 0.0D, 0.0D, new int[0]);
+                    double d17 = (double)p_180439_3_.func_177958_n() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
+                    double d20 = (double)p_180439_3_.func_177956_o() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
+                    double d23 = (double)p_180439_3_.func_177952_p() + 0.5D + ((double)this.field_72769_h.field_73012_v.nextFloat() - 0.5D) * 2.0D;
+                    this.field_72769_h.func_175688_a(EnumParticleTypes.SMOKE_NORMAL, d17, d20, d23, 0.0D, 0.0D, 0.0D, new int[0]);
+                    this.field_72769_h.func_175688_a(EnumParticleTypes.FLAME, d17, d20, d23, 0.0D, 0.0D, 0.0D, new int[0]);
                 }
 
-                break;
+                return;
             case 2005:
                 ItemDye.func_180617_a(this.field_72769_h, p_180439_3_, p_180439_4_);
                 break;
             case 2006:
 
-                for (int k = 0; k < 200; ++k)
+                for (int i2 = 0; i2 < 200; ++i2)
                 {
                     float f2 = random.nextFloat() * 4.0F;
                     float f3 = random.nextFloat() * ((float)Math.PI * 2F);
-                    double d3 = (double)(MathHelper.func_76134_b(f3) * f2);
-                    double d4 = 0.01D + random.nextDouble() * 0.5D;
-                    double d5 = (double)(MathHelper.func_76126_a(f3) * f2);
-                    Particle particle = this.func_174974_b(EnumParticleTypes.DRAGON_BREATH.func_179348_c(), false, (double)p_180439_3_.func_177958_n() + d3 * 0.1D, (double)p_180439_3_.func_177956_o() + 0.3D, (double)p_180439_3_.func_177952_p() + d5 * 0.1D, d3, d4, d5);
+                    double d6 = (double)(MathHelper.func_76134_b(f3) * f2);
+                    double d7 = 0.01D + random.nextDouble() * 0.5D;
+                    double d8 = (double)(MathHelper.func_76126_a(f3) * f2);
+                    Particle particle = this.func_174974_b(EnumParticleTypes.DRAGON_BREATH.func_179348_c(), false, (double)p_180439_3_.func_177958_n() + d6 * 0.1D, (double)p_180439_3_.func_177956_o() + 0.3D, (double)p_180439_3_.func_177952_p() + d8 * 0.1D, d6, d7, d8);
 
                     if (particle != null)
                     {
@@ -2489,12 +2520,12 @@
     {
         if (p_180441_3_ >= 0 && p_180441_3_ < 10)
         {
-            DestroyBlockProgress destroyblockprogress = this.field_72738_E.get(p_180441_1_);
+            DestroyBlockProgress destroyblockprogress = this.field_72738_E.get(Integer.valueOf(p_180441_1_));
 
             if (destroyblockprogress == null || destroyblockprogress.func_180246_b().func_177958_n() != p_180441_2_.func_177958_n() || destroyblockprogress.func_180246_b().func_177956_o() != p_180441_2_.func_177956_o() || destroyblockprogress.func_180246_b().func_177952_p() != p_180441_2_.func_177952_p())
             {
                 destroyblockprogress = new DestroyBlockProgress(p_180441_1_, p_180441_2_);
-                this.field_72738_E.put(p_180441_1_, destroyblockprogress);
+                this.field_72738_E.put(Integer.valueOf(p_180441_1_), destroyblockprogress);
             }
 
             destroyblockprogress.func_73107_a(p_180441_3_);
@@ -2502,7 +2533,7 @@
         }
         else
         {
-            this.field_72738_E.remove(p_180441_1_);
+            this.field_72738_E.remove(Integer.valueOf(p_180441_1_));
         }
     }
 
